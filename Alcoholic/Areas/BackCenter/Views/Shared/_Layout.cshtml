<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @*<script src="~/js/vue.min.js"></script>*@
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.13/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.5.2/dist/sweetalert2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue2-dropzone@3.6.0/dist/vue2Dropzone.min.js"></script>
    <script src="https://unpkg.com/vue-multiselect@2.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="~/css/bootstrap.css">
    <link rel="stylesheet" href="~/css/vue2Dropzone.min.css">
    <link href="https://use.fontawesome.com/releases/v6.2.0/css/all.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/04a61d6a18.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.5.2/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-multiselect@2.1.0/dist/vue-multiselect.min.css">
    <link rel="shortcut icon" type="image/ico" href="@Url.Content("~/images/icons/logoicon-r.png")">
     <style>
        h2 {
            color: #842029
        }

        h3 {
            font-size: 2 rem;
            font-weight: bold;
            color: #444;
            margin-bottom: 16px;
        }

        h4 {
            font-size: 1rem;
        }

        h5 {
            font-size: medium;
            color: #666;
            margin-bottom: 0;
        }
        body {
            position: relative;
            background-color: #333;
            min-width: 852px;
        }

        .MainArea {
            background-color: #fff;
            border-radius: 0.375rem;
        }

        /*水平分割並靠外*/
        .spacebetween {
            display: flex;
            justify-content: space-between;
        }

        .spacebetween h3 {
            margin: 0;
            display: flex;
            align-items: center;
        }

        /* Top Nav */
        .navbar {
            justify-content: space-around;
        }

        @@media screen and (max-width:852px) {
            .navbar i {
                display: block;
            }
        }

        .navigation{
            display: flex;
            flex-direction: column;
            justify-content:space-between;
        }

        .navigation img {
            width: 100%;
        }
        .navigation hr {
            color: #fff;
        }

        .navigation i{
            width:16px;
            height: 16px;
            text-align:center;
        }
        .nav-link {
            border: 0;
            color: #fff;
            background-color: transparent;
            transition: ease;
            transition-duration: 0.4s;
        }
        .nav-link:hover {
            color: #D8CDB9;
            border-bottom: #D8CDB9 1px solid;
            transition: ease;
            transition-duration: 0.4s;
        }

        .nav-link:focus {
            color: #D8CDB9;
            font-weight: bold;
        }
        /* 資料中心 */
        .scrollregion {
            overflow-y: scroll;
            height: 100vh;
        }

        .dataarea {
            width: 100%;
            display: flex;
            justify-content: space-around;
        }

        .datadetail {
            width: 24%;
            border: 1px solid rgb(215, 215, 215);
            border-radius: 0.375rem;
        }

        .datadetail:hover,
        .keymarkdetail:hover {
            border-bottom: 2px solid #842029;
        }

        /*下拉選單*/
        #mark {
            width: 20%;
        }
        /*表格*/
        img {
            width: 100px;
        }
        .table {
            text-align: center;
        }
        .data table {
            margin-left: 5px;
        }
        .data table {
            width: 80%;
        }

        .data thead, 
        .datacenter thead, 
        .discountmanage thead, 
        .productmanage thead,
        .bookinginfo thead {
            background-color: rgb(215, 215, 215);
            color: #444;
            height: 30px;
            line-height: 30px;
        }

        .data td, 
        .datacenter td, 
        .discountmanage td,
        .bookinginfo td {
            line-height: 100px;
        }

        .data tbody tr:hover, 
        .datacenter tbody tr:hover,
        .discountmanage tbody tr:hover, 
        .productmanage tbody tr:hover ,
        .todaydata tbody tr:hover {
            background-color: rgb(241, 241, 241);
        }

        .discountmanage tr,
        .products tr {
            text-align: center;
        }

        .discountmanage button,
        .products button {
            line-height: 24px;
        }
        /* 數據中心 關鍵指標 */
        .datacenter ul button,
        .datacenter ul a {
            color: #000;
        }

        .datacenter ul .nav-link:hover {
            color: #842029;
            border-bottom: #842029 1px solid;
            transition: ease;
            transition-duration: 0.4s;
        }

        .datacenter ul .nav-link:focus {
            color: #842029;
            font-weight: bold;
        }

        .datacenter h2 {
            margin: 5px 0 5px 0;
        }

        .datacenter p {
            margin: 0;
        }

        .keymark {
            width: 100%;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .keymarkdetail {
            width: 19%;
            border: 1px solid rgb(215, 215, 215);
            border-radius: 0.375rem;
        }

        .info {
            padding: 50px;
            border: 1px solid rgb(215, 215, 215);
        }

        .discount,
        .undiscount {
            border: 1px solid rgb(215, 215, 215);
            border-radius: 0.375rem;
            width: 100%;
            display: flex;
            justify-content: space-around;
            text-align: left;
        }
        /* 商品管理 */
        .addproduct {
            display: flex;
        }

        .productAdding {
            display: flex;
            flex-direction: column;
        }

        .productmanage {
            position: relative;
        }


        .multiselect__tag {
            background-color: #C28C2E
        }

        .multiselect__tag-icon {
            color: white
        }
        /*優惠管理*/
        .discountmanage {
            position: relative;
        }
        /*booking*/
        .bookinginfo button {
            line-height: 24px;
        }
        /*當日訂位*/
        .bookingtoday {
            border: 1px solid rgb(215, 215, 215);
            border-radius: 0.375rem;
        }

        .todaydata {
            width: 100%;
            justify-content: space-around;
        }

            .todaydata thead {
                background-color: #D8CDB9;
                height: 30px;
                line-height: 30px;
            }


        /*篩選訂位*/
        .datepick {
            width: auto;
        }

        .btn-search {
            border: 1px solid #ccc;
            border-radius: 4px;
            color: #555;
            padding: 6px 10px;
            font-size: 14px;
            line-height: 1.4;
        }
        /*Modal*/
        .addproducttitle,
        .editproducttitle,
        .bookingdModal .modal-header,
        .editdiscounttitle {
            background-color: #842029;
        }

        .addproducttitle h3,
        .editproducttitle h3,
        .bookingdModal h3,
        .editdiscounttitle h3{
            color: white;
        }

        label {
            padding: 12px 0 6px 3px;
        }

        .bookingdModal input, .bookingdModal select {
            border: 1px solid #ccc;
            border-radius: 4px;
            height: 38px;
            padding: 6px 12px 6px 12px;
        }
        /*btn*/
        .addbtn {
            width: 150px;
        }

        .addbtn,
        .btneditproducts {
            border: 0;
            border-radius: 0.375rem;
            background-color: #842029;
            color: #fff;
        }

        .btnproducts {
            width: 45px;
        }

        .btnproducts,
        .btneaddcancel {
            border-radius: 0.375rem;
            border: 1px solid rgb(215, 215, 215);
            height: 30px;
            background-color: #fff;
            color: #842029;
        }

        .addbtn:hover,
        .btnproducts:hover,
        .btneaddcancel:hover,
        .btneditproducts:hover {
            background-color: #666;
            color: #fff;
            font-weight: bold;
        }

        .btndisable {
            cursor: not-allowed;
            pointer-events: none;
            width: 45px;
            border-radius: 0.375rem;
            border: 1px solid rgb(215, 215, 215);
            height: 30px;
            background-color: rgb(215, 215, 215);
            color: #fff;
        }

        .scrollPage {
            overflow-y: scroll;
            height: 70vh;
        }

        .my-actions {
            margin: 0 2em;
        }

        
        .addingPage {
            overflow-y: scroll;
            height: 70vh;
        }

        .loginbtn{
            border: 0;
            background-color: transparent;
            color:#FFF;
            font-size:2rem;
        }

        .loginbtn:hover{
            color: #842029;
        }
        .logincard{
            width:200px;
            border: 0;
            border-radius: 0.375rem;
            background-color: rgba(255,255,255,0.5);
        }
        .logincard button, input{
            padding: 4px;
            border: 0;
            border-radius: 0.375rem;
        }

                .logincard button:hover{
                    color: #842029;
                }

        #empName{
            color:aliceblue;
            font-weight:bolder;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-2 navigation">
                <div class="">
                    <div class="logo my-3">
                        <img class="logoimg" src="~/Images/icons/logo-w.png" alt="">
                        <hr>
                    </div>
                    <ul class="nav navbar" id="myTab" role="tablist">
                    <li class="" role="presentation">
                        <a class="nav-link active" href="~/backcenter/back">
                            <i class="fa-solid fa-house"></i> 後臺首頁</a>
                    </li>
                    <li class="" role="presentation">
                        <a class="nav-link" href="~/backcenter/datacenter">
                            <i class="fa-solid fa-gauge-high"></i> 數據中心</a>
                    </li>
                    <li class="" role="presentation">
                        <a class="nav-link" href="~/backcenter/products" aria-controls="contact-tab-pane" aria-selected="false">
                            <i class="fa-solid fa-list"></i> 商品管理</a>
                    </li>
                    <li class="" role="presentation">
                        <a class="nav-link" href="~/backcenter/discounts">
                            <i class="fa-solid fa-tags"></i> 優惠管理</a>
                    </li>
                    <li class="" role="presentation">
                        <a class="nav-link" href="~/backcenter/bookings">
                            <i class="fa-solid fa-table"></i> 訂位管理</a>
                    </li>
                    <li class="" role="presentation">
                        <a class="nav-link" href="~/backcenter/order">
                            <i class="fa-sharp fa-solid fa-martini-glass"></i> 訂單管理
                        </a>
                    </li>
                    <li class="" role="presentation">
                        <a class="nav-link" href="~/backcenter/member"><i class="fa-solid fa-user"></i> 會員管理</a>
                    </li>
                    <li class="" role="presentation">
                        <a class="nav-link" href="~/backcenter/staff"><i class="fa-solid fa-clipboard-user"></i> 員工管理</a>
                    </li>
                </ul>
                </div>
                <div id="emp">
                    <div>
                        <div class="collapse collapse-horizontal mb-2" id="collapseWidthExample">
                            <div class="card card-body logincard p-2">
                                <label>帳號:</label><input v-model=acc type="text" />
                                <label>密碼:</label><input v-model=pw type="password" />
                                <button v-on:click="log" class="m-3"><i class="fa-solid fa-user-tie"></i>Login</button>
                            </div>
                        </div>
                    </div>
                    <p>
                        <button  class="loginbtn" type="button" data-bs-toggle="collapse" data-bs-target="#collapseWidthExample" aria-expanded="false" aria-controls="collapseWidthExample">
                            <i class="fa-solid fa-circle-chevron-up"></i>
                      </button>
                        <span class="ms-4" id="empName"><i class="fa-solid fa-image-portrait mx-1"></i>{{name}}</span>
                    </p>
                </div>
            </div>
            <div class="col-10 scrollregion">
                <div class="container-fluid my-5">
                    <div class="tab-content MainArea" id="myTabContent">
                        @RenderBody()
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
    <script>
        const loggedstaff = new Vue({
            el:"#emp",
            data:{
                acc:"",
                pw:"",
                name:"尚未登入"
            },
            methods:{
                log:function(){
                    let emp = {
                        EmpAccount : this.acc,
                        EmpPassword : this.pw
                    }
                    setTimeout(()=>{
                        fetch("/backcenter/staff/login",{
                            method:"post",
                            headers:{"Content-Type":"application/json"},
                            body: JSON.stringify(emp)
                        }).then(e => e.json()).then( r => {
                            if (r.result){
                                Swal.fire({
                                    position: 'center',
                                    icon: 'success',
                                    title: '登入成功',
                                    showConfirmButton: false,
                                    timer: 1500
                                });
                                this.name = r.object;
                            }else{
                                Swal.fire({
                                    position: 'center',
                                    icon: 'error',
                                    title: '帳號密碼錯誤',
                                    showConfirmButton: false,
                                    timer: 1500
                                })
                            }
                        })
                    },1)
                const Toast = Swal.mixin({
                  toast: true,
                    position: 'bottom-start',
                  showConfirmButton: false,
                  timer: 3000,
                  timerProgressBar: true,
                })
                    Toast.fire({
                      icon: 'success',
                      title: '登入中'
                    })
                }
            },
            mounted:function(){
                let self = this;
            fetch("/backcenter/back/getname").then(e => e.json()).then(r => self.name = r);
            }
        })
    </script>
</html>


